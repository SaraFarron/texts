# Встроенные функции Perl. Обработка хешей

Просматривая статистику, я обнаружила, что большая часть посетителей ищет информацию "для начинающих". Теперь планирую опубликовать описание всех встроенных в perl функций. Вполне вероятно, за несколько месяцев эту задачу можно выполнить. Сегодня - описание функций для работы с хешами.


## keys

<pre>keys HASH</pre>

Функция <font color="#00aa00">keys</font> возвращает список всех ключей заданного хеша. Ключи возвращаются в случайном порядке, без какой либо сортировки. При необходимости, список можно отсортировать позднее.

Пример:

```perl
#!/usr/local/bin/perl

my %hash = (
        'line1' => 'Изменения в природе',
        'line2' => 'Происходят год от года',
        'line3' => 'Непогода нынче в моде',
        'line4' => 'Непогода, непогода...',
);
my @array = keys %hash;
print join(' ', @array)."\n";
```

Вывод:
<pre>%perl hash.pl
line3 line4 line1 line2
</pre>

В скалярном контексте <font color="#00aa00">keys</font> возвращает число элементов в хеше.

```perl
print keys(%hash)."\n";
```

## values

<pre>values %HASH</pre>

Функция возвращает список, содержащий все значения хеша. Значения возвращаются в случайном порядке.

Пример:

```perl
my %hash = (
        'line1' => 'Изменения в природе',
        'line2' => 'Происходят год от года',
        'line3' => 'Непогода нынче в моде',
        'line4' => 'Непогода, непогода...',
);
my @array = values %hash;
print join("\n",@array)."\n";
```

Вывод:
<pre>
%perl hash.pl
Непогода нынче в моде
Непогода, непогода...
Изменения в природе
Происходят год от года
</pre>

Возвращаемый функцией <font color="#00aa00">values</font> список, содержит не копии значений, а их псевдонимы. Поэтому, с помощью <font color="#00aa00">values</font> можно изменять содержимое хеша.

Пример:

```perl
my %hash = (
        'line1' => 'Изменения в природе',
        'line2' => 'Происходят год от года',
        'line3' => 'Непогода нынче в моде',
        'line4' => 'Непогода, непогода...',
);

foreach (values %hash) {
        $_ = '* '.$_;
}
my @array = values %hash;
print join("\n",@array)."\n";
```

Вывод:
<pre>
%perl hash.pl
* Непогода нынче в моде
* Непогода, непогода...
* Изменения в природе
* Происходят год от года
</pre>

## each

<pre>each HASH</pre>
Функция проходит хеш, возвращая пару - ключ и значение. В списковом контексте возвращает одну пару хеша. В скалярном контексте возвращает очередной ключ хеша.

Пример:

```perl
my @array = each %hash;
print join(" ",@array)."\n";

my @array = each %hash;
print join(" ",@array)."\n";
```

Вывод:
<pre>
%perl hash.pl
line3 Непогода нынче в моде
line4 Непогода, непогода...
</pre>
Каждый хеш имеет собственный итератор. Функции <font color="#00aa00">each, keys и values</font> используют его для определения того, какой элемент был возвращен последним, и какой будет возвращен во время следующей итерации. Если хеш пройден полностью, значение итератора сбрасывается. Сбросить значение итератора можно выполнив функцию <font color="#00aa00">keys %hash</font> или <font color="#00aa00">values %hash</font>.

## exists

<pre>exists EXPR</pre>

Функция <font color="#00aa00">exists</font> проверяет наличие указанного ключа (или индекса) в хеше (или массиве). Если ключ найден - возвращает true. С помощью <font color="#00aa00">exists</font> можно осуществлять проверку наличия элементов в сложных структурах данных.

```perl
my %hash = (
        'text1' => {
                'line1' => 'Изменения в природе',
                'line2' => 'Происходят год от года',
                'line3' => 'Непогода нынче в моде',
                'line4' => 'Непогода, непогода...',
        },
        'text2' => {
                'line1' => 'Не ангина, не простуда, посерьезнее беда',
                'line2' => 'Полгода плохая погода, полгода совсем никуда...',
        },
);
if (exists $hash{text2}->{line2}) {
        print $hash{text2}->{line2}."\n";
}
```

С помощью <font color="#00aa00">exists</font> можно проверять наличие нужных подпрограмм в коде.

```perl
print "OK" if exists &amp;ok;

sub ok {
        return 1;
}
sub not {
        return 0;
}
```


## delete

<pre>delete EXPR</pre>

Функция удаляет элемент из хеша или массива. Возвращает список удаленных элементов.

Пример:

```perl
my %hash = (
        'line1' => 'Изменения в природе',
        'line2' => 'Происходят год от года',
        'line3' => 'Непогода нынче в моде',
        'line4' => 'Непогода, непогода...',
);
delete $hash{'line4'};
print join(' ', keys %hash)."\n";
```

Вывод:
<pre>
%perl hash.pl
line3 line1 line2
</pre>
Не рекомендуется использовать <font color="#00aa00">delete</font>, если необходимо удалить все элементы из хеша или массива. Для удаления всех элементов лучше использовать <font color="#00aa00">%hash = ();</font> и <font color="#00aa00">@array = ();</font>
