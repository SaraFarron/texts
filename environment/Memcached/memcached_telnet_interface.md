# Memcached Telnet Interface - подключение к memcached через telnet

<i>К memcached можно подключиться через telnet. Очень удобно, если во время разработки возникает необходимость проверить - а что там происходит, внутри memcached?</i>


Подключиться очень просто:
<pre>$ telnet 127.0.0.1 11211</pre>

## Список команд
**Название команды** - Описание - <i>Пример использования</i>
<ul>
 	<li>**get** - Читает значение ключа - <i>get mykey</i></li>
 	<li>**set** - Задает значение ключа. Если ключ уже задан, перезапишет его значение - <i>set mykey 0 60 5</i></li>
 	<li>**add** - Добавляет новый ключ и значение к нему. Если ключ уже существует, команда не будет выполнена - <i>add newkey 0 60 5</i></li>
 	<li>**replace** - Перезаписывает значение существующего ключа. Если ключ не существует, команда не будет выполнена - <i>replace key 0 60 5</i></li>
 	<li>**append** - Добавляет данные к уже существующим значениям заданного ключа - <i>append key 0 60 15</i></li>
 	<li>**prepend** - Добавляет данные перед существующими данными заданного ключа - <i>prepend key 0 60 15</i></li>
 	<li>**incr** - Увеличивает числовое значение ключа на заданное число - <i>incr mykey 2</i></li>
 	<li>**decr** - Уменьшает числовое значение ключа на заданное число - <i>decr mykey 5</i></li>
 	<li>**delete** - Удаляет существующий ключ из хранилища - <i>delete mykey</i></li>
 	<li>**flush_all** - Сбрасывает все элементы хранилища. По выбору - сразу или через заданное количество секунд - <i>flush_all</i> или <i>flush_all 900</i></li>
 	<li>**stats** - Вывод статистических данных для memcached - <i>stats</i>.
<ul>
 	<li>**stats slabs** - Выводит статистику использования памяти</li>
 	<li>**stats malloc** - Выводит статистику использования памяти</li>
 	<li>**stats items** - Возвращает статистику о сохраненных в memcached элементах</li>
 	<li>**stats detail**</li>
 	<li>**stats sizes**</li>
 	<li>**stats reset** - Обнуляет статистику</li>
</ul>
</li>
 	<li>**version** - Выводит на экран информацию о версии сервера memcached - <i>version</i></li>
 	<li>**verbosity** - Повышает уровень подробности логов - <i>verbosity</i></li>
 	<li>**quit** - Завершение telnet-сессии - <i>quit</i></li>
</ul>

## Примеры работы с memcached через telnet

### Сохраняем значение ключа
<pre>set mykey 0 60 5
value
STORED
</pre>
Команды "set", "add", "replace", "append" и "prepend" имеют общий шаблон:
<pre><command name=""> <key> <flags> <exptime> <bytes> [noreply]\r\n
</bytes></exptime></flags></key></command></pre>
<ul>
 	<li>key - это имя ключа</li>
 	<li>flags -  произвольное 16-битное целое число, которое сервер хранит вместе с данными и возвращает его, когда клиент извлекает значение ключа. Задается в десятичном формате. Может использоваться клиентом по собственному усмотрению.</li>
 	<li>exptime - время жизни ключа. Указывается в секундах. Если задан 0, ключ будет жить до тех пор, пока система не удалит его, освобождая место для новых ключей. Если задан срок жизни больше месяца, ключ не будет сохранен - такой срок жизни считается ошибкой.</li>
 	<li>bytes - число байтов в блоке данных. Если указан 0, блок данных будет пустым.</li>
</ul>
Блок данных вводится после того, как в терминале введена команда со всеми вышеприведенными
параметрами и нажата клавиша Enter. Повторный Enter сохраняет блок данных или выводит ошибку.
### Получаем значение ключа
<pre>get mykey
VALUE mykey 0 5
value
END
</pre>

### Увеличиваем числовое значение ключа на 4
<pre>incr mykey 4
22
</pre>

### Удаляем ключ
<pre>delete mykey
DELETED
</pre>

### Запрашиваем версию memcached
<pre>version
VERSION 1.2.2
</pre>

### Завершаем сеанс работы с telnet
<pre>quit
Connection closed by foreign host.
</pre>

<a href="https://github.com/memcached/memcached/blob/master/doc/protocol.txt">github.com: Описание команд memcached</a>

